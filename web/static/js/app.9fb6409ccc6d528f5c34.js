webpackJsonp([1,2],{142:function(e,t,s){s(190),s(191),s(192);var n=s(8)(s(145),s(204),"data-v-bd26cd6c",null);e.exports=n.exports},144:function(e,t,s){"use strict";function n(e){return new c.a(function(t){setTimeout(t,e)})}function a(e){var t=arguments,s=function(t){return n(e).then(function(){return t})};return s.then=function(){var s=n(e);return s.then.apply(s,t)},s.catch=c.a.resolve().catch,s}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function o(e){var t=[];for(var s in e)t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t.join("&")}var i=s(151),c=s.n(i);t.a={getAnswer:function(e){return fetch("/api/get-answer",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:o({q:e})}).then(a(1500)).then(r).then(function(e){return e.json()})}}},145:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(197),a=s.n(n);t.default={name:"app",components:{Messanger:a.a}}},146:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(0),a=(s.n(n),s(21));s.n(a);t.default={name:"message",props:{id:{type:Number,required:!0},authorID:{type:Number,default:function(){return 0}},content:{type:String,default:function(){return""}},creationTime:{type:Date,default:function(){return new Date}},error:{type:Boolean,default:function(){return!1}},hidden:{type:Boolean,default:function(){return!1}}},computed:{time:function(){return n(this.creationTime).calendar(null,{sameDay:"H:mm",lastDay:"[Вчера,] H:mm",lastWeek:"dddd, H:mm",sameElse:"DD/MM/YYYY"})},fromMe:function(){return!this.authorID}},methods:{onDelete:function(){this.$emit("delete",this.id)}}}},147:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(150),a=s.n(n),r=s(0),o=s.n(r),i=s(196),c=s.n(i),u=s(198),l=s.n(u),m=s(199),d=s.n(m),h=s(144),v=s(195),p=s.n(v);t.default={name:"messanger",data:function(){var e=localStorage.getItem("messangerData");return e?(e=JSON.parse(e),e.writes=!1,e):{messageID:4,messages:[{id:0,authorID:0,content:"Старое сообщение",creationTime:new Date(2017,1,12),hidden:!0},{id:1,authorID:0,content:"Ещё одно старое сообщение",creationTime:new Date(2017,1,13),hidden:!0},{id:2,authorID:1,content:"Шушпанчик что-то ответил",creationTime:new Date(2017,2,18),hidden:!0},{id:3,authorID:0,content:"Это сообщение не доставлено",creationTime:new Date(2017,2,18),hidden:!0,error:!0},{id:4,authorID:1,content:"Новое сообщение от шушпанчика"}],companion:{avatar:p.a,name:"Огненный шушпанчик"},writes:!1}},methods:{submitMessageHandler:function(e){this.addMessage(e),this.writes||this.getAnswer(e)},addMessage:function(e){this.messageID++,e.id=this.messageID,this.messages.push(e)},deleteMessage:function(e){for(var t=0;t<this.messages.length;t++)if(this.messages[t].id===e){this.messages.splice(t,1);break}},getAnswer:function(e){var t=this;this.writes=!0,h.a.getAnswer(e.content).then(function(e){if(t.writes=!1,!e.ok)throw new Error(e.error);t.addMessage({authorID:1,content:e.a})}).catch(function(){t.writes=!1;var e=t.messages.pop();e.error=!0,t.addMessage(e)})},findMessages:function(e){e?this.messages=this.messages.map(function(t){var s=t.content.toLowerCase().indexOf(e.toLowerCase());return t.hidden=s===-1,t}):(this.messages=this.messages.map(function(e){return e.hidden=!1,e}),this.toggleHistoryHandler(!1))},toggleHistoryHandler:function(e){this.messages=this.messages.map(function(t){var s=o()().format("YYYY.MM.DD");return o()(t.creationTime).format("YYYY.MM.DD")!==s&&(t.hidden=!e),t})}},watch:{messages:function(e){localStorage.setItem("messangerData",a()({messageID:this.messageID,messages:e,companion:this.companion}))}},components:{Message:c.a,SendForm:l.a,TopPanel:d.a}}},148:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"send-form",data:function(){return{tempContent:""}},methods:{submitMessage:function(){this.$emit("submitMessage",{authorID:0,content:this.tempContent,date:new Date}),this.tempContent=""}}}},149:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(193),a=s.n(n);t.default={name:"top-panel",props:{companion:Object},data:function(){return{searchFormIsOpen:!1,historyButtonIsActive:!1,searchInput:""}},methods:{toggleSearchForm:function(){this.searchFormIsOpen=!this.searchFormIsOpen},updateSearchForm:a()(function(e){this.forceUpdateSearchForm()},300),forceUpdateSearchForm:function(){this.$emit("search",this.searchInput)},resetSearchForm:function(){this.searchFormIsOpen&&(this.searchInput="",this.forceUpdateSearchForm(),this.toggleSearchForm(),this.historyButtonIsActive=!1)},toggleHistory:function(){this.historyButtonIsActive=!this.historyButtonIsActive,this.$emit("toggleHistory",this.historyButtonIsActive)}}}},186:function(e,t){},187:function(e,t){},188:function(e,t){},189:function(e,t){},190:function(e,t){},191:function(e,t){},192:function(e,t){},194:function(e,t,s){function n(e){return s(a(e))}function a(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./af":34,"./af.js":34,"./ar":40,"./ar-dz":35,"./ar-dz.js":35,"./ar-ly":36,"./ar-ly.js":36,"./ar-ma":37,"./ar-ma.js":37,"./ar-sa":38,"./ar-sa.js":38,"./ar-tn":39,"./ar-tn.js":39,"./ar.js":40,"./az":41,"./az.js":41,"./be":42,"./be.js":42,"./bg":43,"./bg.js":43,"./bn":44,"./bn.js":44,"./bo":45,"./bo.js":45,"./br":46,"./br.js":46,"./bs":47,"./bs.js":47,"./ca":48,"./ca.js":48,"./cs":49,"./cs.js":49,"./cv":50,"./cv.js":50,"./cy":51,"./cy.js":51,"./da":52,"./da.js":52,"./de":54,"./de-at":53,"./de-at.js":53,"./de.js":54,"./dv":55,"./dv.js":55,"./el":56,"./el.js":56,"./en-au":57,"./en-au.js":57,"./en-ca":58,"./en-ca.js":58,"./en-gb":59,"./en-gb.js":59,"./en-ie":60,"./en-ie.js":60,"./en-nz":61,"./en-nz.js":61,"./eo":62,"./eo.js":62,"./es":64,"./es-do":63,"./es-do.js":63,"./es.js":64,"./et":65,"./et.js":65,"./eu":66,"./eu.js":66,"./fa":67,"./fa.js":67,"./fi":68,"./fi.js":68,"./fo":69,"./fo.js":69,"./fr":72,"./fr-ca":70,"./fr-ca.js":70,"./fr-ch":71,"./fr-ch.js":71,"./fr.js":72,"./fy":73,"./fy.js":73,"./gd":74,"./gd.js":74,"./gl":75,"./gl.js":75,"./he":76,"./he.js":76,"./hi":77,"./hi.js":77,"./hr":78,"./hr.js":78,"./hu":79,"./hu.js":79,"./hy-am":80,"./hy-am.js":80,"./id":81,"./id.js":81,"./is":82,"./is.js":82,"./it":83,"./it.js":83,"./ja":84,"./ja.js":84,"./jv":85,"./jv.js":85,"./ka":86,"./ka.js":86,"./kk":87,"./kk.js":87,"./km":88,"./km.js":88,"./ko":89,"./ko.js":89,"./ky":90,"./ky.js":90,"./lb":91,"./lb.js":91,"./lo":92,"./lo.js":92,"./lt":93,"./lt.js":93,"./lv":94,"./lv.js":94,"./me":95,"./me.js":95,"./mi":96,"./mi.js":96,"./mk":97,"./mk.js":97,"./ml":98,"./ml.js":98,"./mr":99,"./mr.js":99,"./ms":101,"./ms-my":100,"./ms-my.js":100,"./ms.js":101,"./my":102,"./my.js":102,"./nb":103,"./nb.js":103,"./ne":104,"./ne.js":104,"./nl":106,"./nl-be":105,"./nl-be.js":105,"./nl.js":106,"./nn":107,"./nn.js":107,"./pa-in":108,"./pa-in.js":108,"./pl":109,"./pl.js":109,"./pt":111,"./pt-br":110,"./pt-br.js":110,"./pt.js":111,"./ro":112,"./ro.js":112,"./ru":21,"./ru.js":21,"./se":113,"./se.js":113,"./si":114,"./si.js":114,"./sk":115,"./sk.js":115,"./sl":116,"./sl.js":116,"./sq":117,"./sq.js":117,"./sr":119,"./sr-cyrl":118,"./sr-cyrl.js":118,"./sr.js":119,"./ss":120,"./ss.js":120,"./sv":121,"./sv.js":121,"./sw":122,"./sw.js":122,"./ta":123,"./ta.js":123,"./te":124,"./te.js":124,"./tet":125,"./tet.js":125,"./th":126,"./th.js":126,"./tl-ph":127,"./tl-ph.js":127,"./tlh":128,"./tlh.js":128,"./tr":129,"./tr.js":129,"./tzl":130,"./tzl.js":130,"./tzm":132,"./tzm-latn":131,"./tzm-latn.js":131,"./tzm.js":132,"./uk":133,"./uk.js":133,"./uz":134,"./uz.js":134,"./vi":135,"./vi.js":135,"./x-pseudo":136,"./x-pseudo.js":136,"./yo":137,"./yo.js":137,"./zh-cn":138,"./zh-cn.js":138,"./zh-hk":139,"./zh-hk.js":139,"./zh-tw":140,"./zh-tw.js":140};n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id=194},195:function(e,t,s){e.exports=s.p+"static/img/favicon.cafb48a.png"},196:function(e,t,s){s(188);var n=s(8)(s(146),s(202),"data-v-78f5f835",null);e.exports=n.exports},197:function(e,t,s){s(189);var n=s(8)(s(147),s(203),"data-v-9c60b886",null);e.exports=n.exports},198:function(e,t,s){s(187);var n=s(8)(s(148),s(201),"data-v-70471d97",null);e.exports=n.exports},199:function(e,t,s){s(186);var n=s(8)(s(149),s(200),"data-v-55c6e88c",null);e.exports=n.exports},200:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"top-panel",on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27))return null;e.resetSearchForm(t)}}},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.companion.avatar,alt:"аватарка"}})]),e._v(" "),s("div",{staticClass:"name"},[e._v(e._s(e.companion.name))])]),e._v(" "),s("div",{staticClass:"search-form",class:{open:e.searchFormIsOpen}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],staticClass:"search-input",attrs:{type:"text",name:"search",placeholder:"Искать..."},domProps:{value:e.searchInput},on:{input:[function(t){t.target.composing||(e.searchInput=t.target.value)},e.updateSearchForm]}}),e._v(" "),s("button",{staticClass:"reset-button",attrs:{type:"button"},on:{click:e.resetSearchForm}},[s("i",{staticClass:"close-icon"})])]),e._v(" "),s("div",{staticClass:"buttons"},[s("button",{staticClass:"history-button",class:{active:e.historyButtonIsActive},attrs:{type:"button"},on:{click:e.toggleHistory}},[s("i",{staticClass:"massive history-icon"})]),e._v(" "),s("button",{staticClass:"search-button",attrs:{type:"button"},on:{click:e.toggleSearchForm}},[s("i",{staticClass:"massive search-icon"})])])])},staticRenderFns:[]}},201:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"send-form",on:{keyup:function(t){return t.ctrlKey&&("button"in t||!e._k(t.keyCode,"enter",13))?void e.submitMessage(t):null}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tempContent,expression:"tempContent"}],staticClass:"chat-input",attrs:{name:"chat-input",id:"chat-input",autofocus:"",placeholder:"Напишите сообщение..."},domProps:{value:e.tempContent},on:{input:function(t){t.target.composing||(e.tempContent=t.target.value)}}}),e._v(" "),s("button",{staticClass:"send-button",attrs:{type:"button"},on:{click:e.submitMessage}},[s("i",{staticClass:"massive submit-icon"})])])},staticRenderFns:[]}},202:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],staticClass:"message",class:{"from-me":e.fromMe,error:e.error}},[s("div",{staticClass:"delete",on:{click:e.onDelete}},[s("i",{staticClass:"tiny close-icon"})]),e._v(" "),s("div",{staticClass:"content"},[e._v(e._s(e.content))]),e._v(" "),s("div",{staticClass:"info"},[s("i",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"error-icon"}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],staticClass:"date"},[e._v(e._s(e.time))])])])},staticRenderFns:[]}},203:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"messanger"},[s("top-panel",{attrs:{companion:e.companion},on:{search:e.findMessages,toggleHistory:e.toggleHistoryHandler}}),e._v(" "),s("div",{staticClass:"messages"},[e._l(e.messages,function(t){return s("message",{key:t.id,attrs:{id:t.id,authorID:t.authorID,content:t.content,"creation-time":t.creationTime,error:t.error,hidden:t.hidden},on:{delete:e.deleteMessage}})}),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.writes,expression:"writes"}],staticClass:"writes"},[e._v("Вам пишут..."),s("i",{staticClass:"tiny pen-icon"})])])],2),e._v(" "),s("send-form",{on:{submitMessage:e.submitMessageHandler}})],1)},staticRenderFns:[]}},204:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("messanger"),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"info"},[s("p",[e._v("\n      В приложении реализованы следующие фичи:\n      "),s("ul",[s("li",[e._v("Поиск в тексте сообщений")]),e._v(" "),s("li",[e._v("Возможность скрыть\\показать историю сообщений")]),e._v(" "),s("li",[e._v("Вывод даты сообщения")]),e._v(" "),s("li",[e._v("Возможность удалить сообщение из истории")]),e._v(" "),s("li",[e._v("Сообщение можно отправить при нажатии ctrl+enter. Закрыть панель с формой поиска можно через esc.")]),e._v(" "),s("li",[e._v("Эмуляция задержки сервера в 1.5 секунды.")]),e._v(" "),s("li",[e._v("Обработка ошибок в случае проблем с сервером или его отсутствия")]),e._v(" "),s("li",[e._v("История сохраняется в localStorage")])]),e._v("\n      ...остальное не реализовано."),s("br"),e._v("\n      Для примера добавлено несколько тестовых сообщений.\n    ")]),e._v(" "),s("p",[e._v("\n      При реализации использовались следующие сторонние библиотеки и ресурсы:\n      "),s("ul",[s("li",[e._v("стандартный сборщик на webpack из vuejs-templates репозитория")]),e._v(" "),s("li",[s("strong",[e._v("lodash.debounce")]),e._v(" - для устранения проблем при вводе в поля формы")]),e._v(" "),s("li",[s("strong",[e._v("moment.js")]),e._v(" - для простого вывода и обработки дат")]),e._v(" "),s("li",[s("strong",[e._v("reset.css")]),e._v(" - сброс css стилей")]),e._v(" "),s("li",[s("strong",[e._v("Material icons")]),e._v(" - иконки")]),e._v(" "),s("li",[s("strong",[e._v("Lora")]),e._v(" - шрифт с google fonts")])])]),e._v(" "),s("p",[s("strong",[e._v("Спасибо за внимание!")])])])}]}},207:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(143),a=s(142),r=s.n(a);n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:r.a}})}},[207]);
//# sourceMappingURL=app.9fb6409ccc6d528f5c34.js.map